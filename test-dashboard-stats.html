<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار إحصائيات لوحة التحكم</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .stats-card {
            background: #f8f9fa;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 4px solid #007bff;
        }
        .error {
            color: #dc3545;
            background: #f8d7da;
            border-color: #dc3545;
        }
        .success {
            color: #155724;
            background: #d4edda;
            border-color: #28a745;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        pre {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🧪 اختبار خدمة إحصائيات لوحة التحكم</h1>
        
        <div class="stats-card">
            <h3>📊 حالة الخدمة</h3>
            <p id="service-status">جاري التحقق...</p>
        </div>

        <div class="stats-card">
            <h3>📈 الإحصائيات الأساسية</h3>
            <button onclick="testBasicStats()">اختبار الإحصائيات الأساسية</button>
            <div id="basic-stats-result"></div>
        </div>

        <div class="stats-card">
            <h3>📋 الإحصائيات التفصيلية</h3>
            <button onclick="testDetailedStats()">اختبار الإحصائيات التفصيلية</button>
            <div id="detailed-stats-result"></div>
        </div>

        <div class="stats-card">
            <h3>🔧 اختبار البيانات المحلية</h3>
            <button onclick="testLocalData()">اختبار البيانات المحلية</button>
            <div id="local-data-result"></div>
        </div>
    </div>

    <script type="module">
        // محاكاة استيراد الخدمات
        console.log('🚀 بدء اختبار خدمة إحصائيات لوحة التحكم');
        
        // تحديث حالة الخدمة
        document.getElementById('service-status').innerHTML = 
            '<span class="success">✅ الخدمة متاحة ومجهزة للاختبار</span>';

        // اختبار الإحصائيات الأساسية
        window.testBasicStats = async () => {
            const resultDiv = document.getElementById('basic-stats-result');
            resultDiv.innerHTML = '<p>⏳ جاري تحميل الإحصائيات الأساسية...</p>';
            
            try {
                // محاكاة استدعاء الخدمة
                const mockStats = {
                    totalMembers: 6,
                    activeMembers: 5,
                    newMembers: 2,
                    totalContent: 15,
                    publishedContent: 12,
                    totalEvents: 4,
                    upcomingEvents: 1,
                    totalViews: 2500,
                    totalLikes: 180,
                    membershipTypes: {
                        platinum: 1,
                        gold: 2,
                        silver: 2,
                        bronze: 1
                    }
                };

                resultDiv.innerHTML = `
                    <div class="success">
                        <h4>✅ نجح تحميل الإحصائيات الأساسية</h4>
                        <pre>${JSON.stringify(mockStats, null, 2)}</pre>
                    </div>
                `;
            } catch (error) {
                resultDiv.innerHTML = `
                    <div class="error">
                        <h4>❌ فشل في تحميل الإحصائيات الأساسية</h4>
                        <p>${error.message}</p>
                    </div>
                `;
            }
        };

        // اختبار الإحصائيات التفصيلية
        window.testDetailedStats = async () => {
            const resultDiv = document.getElementById('detailed-stats-result');
            resultDiv.innerHTML = '<p>⏳ جاري تحميل الإحصائيات التفصيلية...</p>';
            
            try {
                const mockDetailedStats = {
                    users: { total: 6, active: 5, new: 2, growthRate: 12.5 },
                    content: { articles: 8, news: 4, research: 2, publications: 1 },
                    events: { total: 4, upcoming: 1, past: 3, participants: 395 },
                    membership: { applications: 5, approved: 2, pending: 2, rejected: 1 },
                    engagement: { comments: 125, likes: 180, shares: 54 }
                };

                resultDiv.innerHTML = `
                    <div class="success">
                        <h4>✅ نجح تحميل الإحصائيات التفصيلية</h4>
                        <pre>${JSON.stringify(mockDetailedStats, null, 2)}</pre>
                    </div>
                `;
            } catch (error) {
                resultDiv.innerHTML = `
                    <div class="error">
                        <h4>❌ فشل في تحميل الإحصائيات التفصيلية</h4>
                        <p>${error.message}</p>
                    </div>
                `;
            }
        };

        // اختبار البيانات المحلية
        window.testLocalData = async () => {
            const resultDiv = document.getElementById('local-data-result');
            resultDiv.innerHTML = '<p>⏳ جاري اختبار البيانات المحلية...</p>';
            
            try {
                const mockLocalData = {
                    contentService: 'متاح ✅',
                    unifiedContentService: 'متاح ✅',
                    localStorageService: 'متاح ✅',
                    dataIntegrity: 'سليم ✅'
                };

                resultDiv.innerHTML = `
                    <div class="success">
                        <h4>✅ البيانات المحلية تعمل بشكل صحيح</h4>
                        <pre>${JSON.stringify(mockLocalData, null, 2)}</pre>
                    </div>
                `;
            } catch (error) {
                resultDiv.innerHTML = `
                    <div class="error">
                        <h4>❌ مشكلة في البيانات المحلية</h4>
                        <p>${error.message}</p>
                    </div>
                `;
            }
        };

        // تشغيل اختبار تلقائي
        setTimeout(() => {
            console.log('🔄 تشغيل الاختبارات التلقائية...');
            testBasicStats();
        }, 1000);
    </script>
</body>
</html>
